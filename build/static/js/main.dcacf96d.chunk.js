(this.webpackJsonpex2=this.webpackJsonpex2||[]).push([[0],{14:function(t,e,a){t.exports=a(26)},19:function(t,e,a){},25:function(t,e,a){},26:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(4),o=a.n(i),s=(a(19),a(5)),l=a.n(s),c=a(6),u=a(8),p=a(9),h=a(1),v=a(12),m=a(11),f=a(40),y=function(t){Object(v.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).showFile=function(){var t=Object(c.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),(a=new FileReader).onload=function(){var t=Object(c.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.target.result,n.parsePoints(a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.readAsText(e.target.files[0]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.state={left:0,top:0,operation:"",drawBoat:[],points:[],Ymin:0,Ymax:0,Xmax:0,Xmin:0,mouseX:0,mouseY:0,prevmouseX:1,prevmouseY:1,pointsProportion:{x:0,y:0}},n.setOperationMoveState=n.setOperationMoveState.bind(Object(h.a)(n)),n.setOperationRotateState=n.setOperationRotateState.bind(Object(h.a)(n)),n.setOperationMirrorUpDownState=n.setOperationMirrorUpDownState.bind(Object(h.a)(n)),n.setOperationMirrorLeftRightState=n.setOperationMirrorLeftRightState.bind(Object(h.a)(n)),n.setOperationScallingState=n.setOperationScallingState.bind(Object(h.a)(n)),n.handleClear=n.handleClear.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"rotate",value:function(t,e){var a=[[Math.cos(e),Math.sin(e),0],[-Math.sin(e),Math.cos(e),0],[0,0,1]];return this.multipleMatrix(t,a)}},{key:"translateRotate",value:function(t,e,a){var n;return 1===t.z?(n=this.translatePoint(t,-e.x,-e.y),n=this.rotate(n,a),this.translatePoint(n,e.x,e.y)):t}},{key:"componentDidMount",value:function(){var t=this;document.addEventListener("mousemove",(function(e){t.setState({mouseX:e.offsetX,mouseY:e.offsetY},(function(){if("move"===t.state.operation){var e=t.state.points;e.map((function(a,n){var r=t.state.mouseX-t.state.prevmouseX,i=t.state.mouseY-t.state.prevmouseY;e[n]=t.translatePoint(a,r,i)})),t.setState({points:e})}if("rotate"===t.state.operation){var a=1,n=t.state,r=n.prevmouseX,i=n.mouseX,o=n.prevmouseY,s=n.mouseY,l=n.points;r-i<0?a=Math.atan((o-s)/(r-i)):r-i>0&&(a=Math.PI+Math.atan((o-s)/(r-i))),console.log(a),l.map((function(e,n){l[n]=t.translateRotate(e,t.state.pointsProportion,a)})),t.setState({points:l})}if("scalling"===t.state.operation){var c=t.state.points;console.log("scalling");var u=Math.abs((t.state.prevmouseX-t.state.mouseX)/(t.state.Xmax-t.state.Xmin)-1),p=Math.abs(1+(t.state.prevmouseY-t.state.mouseY)/(t.state.Ymax-t.state.Ymin));t.state.points.map((function(e,a){c[a]=t.scaling(e,t.state.pointsProportion,u,p)}))}t.setState({prevmouseX:t.state.mouseX,prevmouseY:t.state.mouseY}),"clear"!==t.state.operation&&t.draw()}))}))}},{key:"scale",value:function(t,e,a){var n=[[e,0,0],[0,a,0],[0,0,1]];return this.multipleMatrix(t,n)}},{key:"scaling",value:function(t,e,a,n){if(1===t.z){var r=[[a,0,0],[0,n,0],[e.x*(1-a),e.y*(1-n),1]];return this.multipleMatrix(t,r)}return{x:t.x*Math.min(a,n),y:t.y,z:t.z}}},{key:"MirrorLeftRight",value:function(){var t=this;this.state.points.map((function(e,a){t.state.points[a]=t.reflectionLeftRight(t.state.points[a],t.state.pointsProportion)})),this.findPointsProprtion(),this.draw()}},{key:"MirrorUpDown",value:function(){var t=this,e=this.state.points;e.map((function(a,n){e[n]=t.reflectionUpDown(a,t.state.pointsProportion)})),this.findPointsProprtion(),this.draw()}},{key:"reflectionLeftRight",value:function(t,e){var a=this.translatePoint(t,-e.x,-e.y);return a=this.multipleMatrix(a,[[1,0,0],[0,-1,0],[0,0,1]]),this.translatePoint(a,e.x,e.y)}},{key:"reflectionUpDown",value:function(t,e){if(1===t.z){var a=this.translatePoint(t,-e.x,-e.y);return a=this.multipleMatrix(a,[[-1,0,0],[0,1,0],[0,0,1]]),this.translatePoint(a,e.x,e.y)}return t}},{key:"drawDiagonal",value:function(t,e,a,n){var r=document.querySelector("canvas").getContext("2d");r.beginPath(),r.moveTo(t,e),r.lineTo(a,n),r.stroke()}},{key:"drawSinglePixel",value:function(t,e){var a=document.querySelector("canvas").getContext("2d");a.fillStyle="black",a.fillRect(t,e,1,1)}},{key:"circleAssist",value:function(t,e,a,n){var r=this.drawSinglePixel;r(t+a,e+n),r(t-a,e+n),r(t+a,e-n),r(t-a,e-n),r(t+n,e+a),r(t-n,e+a),r(t+n,e-a),r(t-n,e-a)}},{key:"drawCircle",value:function(t,e,a){for(var n=0,r=a,i=3-2*a;n<r;)this.circleAssist(t,e,n,r),i<0?i=i+4*n+6:(i=i+4*(n-r)+10,r-=1),n+=1;n===r&&this.circleAssist(t,e,n,r)}},{key:"cleanScreen",value:function(){document.querySelector("canvas").getContext("2d").clearRect(0,0,1e3,800)}},{key:"drawCurve",value:function(t,e,a,n,r){for(var i,o,s=-1*t.x+3*e.x-3*a.x+n.x,l=3*t.x-6*e.x+3*a.x,c=-3*t.x+3*e.x,u=t.x,p=-1*t.y+3*e.y-3*a.y+n.y,h=3*t.y-6*e.y+3*a.y,v=-3*t.y+3*e.y,m=t.y,f=1/r,y=t.x,d=t.y,x=0;x<=1;x+=f)i=s*x*x*x+l*x*x+c*x+u,o=p*x*x*x+h*x*x+v*x+m,this.drawDiagonal(i,o,y,d),y=i,d=o}},{key:"drawLine",value:function(t,e,a,n){var r=Math.abs(n-e)>Math.abs(a-t),i=t,o=e,s=a,l=n;if(r&&(i=e,o=t,s=n,l=a),i>s){var c=i,u=o;i=s,o=l,s=c,l=u}var p=s-i,h=0,v=Math.abs(l-o)/p,m=1;o>l&&(m=-1);for(var f=o,y=i;y<=s;y++)r?this.drawSinglePixel(f,y):this.drawSinglePixel(y,f),(h+=v)>=.5&&(f+=m,h-=1)}},{key:"draw",value:function(){var t=this;this.cleanScreen();var e=this.state,a=e.drawBoat,n=e.points;a.map((function(e,a){1===e[0]?t.drawLine(n[e[1]].x,n[e[1]].y,n[e[2]].x,n[e[2]].y):2===e[0]?t.drawCircle(n[e[1]].x,n[e[1]].y,n[e[2]].x):3===e[0]&&t.drawCurve(n[e[1]],n[e[2]],n[e[3]],n[e[4]],100)}))}},{key:"setOperationMoveState",value:function(){this.setState({operation:"move"})}},{key:"setOperationRotateState",value:function(){this.setState({operation:"rotate"})}},{key:"setOperationMirrorUpDownState",value:function(){this.setState({operation:"mirror"}),this.MirrorLeftRight()}},{key:"setOperationMirrorLeftRightState",value:function(){this.setState({operation:"mirror"}),this.MirrorUpDown()}},{key:"setOperationScallingState",value:function(){this.setState({operation:"scalling"})}},{key:"handleClear",value:function(){this.setState({operation:"clear"}),this.cleanScreen()}},{key:"findPointsProprtion",value:function(){var t,e,a,n,r=this.state.points;r.length>0&&(t=e=r[0].y,a=n=r[0].x,r.map((function(r,i){i>0&&1===r.z&&(r.x<n&&(n=r.x),r.y<e&&(e=r.y),r.x>a&&(a=r.x),r.y>t&&(t=r.y))})),this.setState({Ymax:t,Ymin:e,Xmax:a,Xmin:n,pointsProportion:{x:(a+n)/2,y:(t+e)/2}}))}},{key:"multipleMatrix",value:function(t,e){var a={x:0,y:0,z:0};return a.x=t.x*e[0][0]+t.y*e[1][0]+t.z*e[2][0],a.y=t.x*e[0][1]+t.y*e[1][1]+t.z*e[2][1],a.z=t.x*e[0][2]+t.y*e[1][2]+t.z*e[2][2],a}},{key:"translatePoint",value:function(t,e,a){var n=[[1,0,0],[0,1,0],[e,a,1]];return this.multipleMatrix(t,n)}},{key:"adjustObjectSize",value:function(){var t,e,a,n=this,r=this.state,i=r.Xmax,o=r.Xmin,s=r.Ymax,l=r.Ymin,c=r.points;t=e=0,a=1,i-o>1e3&&(a=1e3/(i-o)*.9),s-l>800&&800/(s-l)*.9>a&&(a=800/(s-l)*.9),o<0?t=-o:i>1e3&&(t=-i),l<0?e=-l:s>800&&(e=-s),c.map((function(a,r){c[r]=n.translatePoint(c[r],t,e)})),this.findPointsProprtion(),this.setState({points:c}),this.draw()}},{key:"parsePoints",value:function(t){var e=t.split(/\r\n|\n/g),a=[],n=[];e.map((function(t){var e,r,i,o,s,l=t.split(",");"1"===l[0]?(e={x:parseInt(l[1]),y:parseInt(l[2]),z:1},r={x:parseInt(l[3]),y:parseInt(l[4]),z:1},a.push([1,n.push(e)-1,n.push(r)-1])):"2"===l[0]?(e={x:parseInt(l[1]),y:parseInt(l[2]),z:1},s={x:parseInt(l[3]),y:0,z:0},a.push([2,n.push(e)-1,n.push(s)-1])):"3"===l[0]&&(e={x:parseInt(l[1]),y:parseInt(l[2]),z:1},r={x:parseInt(l[3]),y:parseInt(l[4]),z:1},i={x:parseInt(l[5]),y:parseInt(l[6]),z:1},o={x:parseInt(l[7]),y:parseInt(l[8]),z:1},a.push([3,n.push(e)-1,n.push(r)-1,n.push(i)-1,n.push(o)-1,100]))})),this.setState({drawBoat:a,points:n}),this.findPointsProprtion(),this.adjustObjectSize(),this.draw()}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("input",{style:{margin:10},type:"file",onChange:function(e){return t.showFile(e)}}),r.a.createElement("div",null,r.a.createElement(f.a,{variant:"contained",color:"primary",onClick:this.setOperationMoveState},"Move"),r.a.createElement(f.a,{variant:"contained",color:"primary",onClick:this.setOperationRotateState},"Rotate"),r.a.createElement(f.a,{variant:"contained",color:"primary",onClick:this.setOperationMirrorLeftRightState},"Mirror left/right"),r.a.createElement(f.a,{variant:"contained",color:"primary",onClick:this.setOperationMirrorUpDownState},"Mirror up/dows"),r.a.createElement(f.a,{variant:"contained",color:"primary",onClick:this.setOperationScallingState},"Scalling"),r.a.createElement(f.a,{variant:"contained",color:"primary",onClick:this.handleClear},"clear")),r.a.createElement("div",{style:{width:1e3,height:800,margin:"0px auto",borderStyle:"solid",borderColor:"black"}},r.a.createElement("canvas",{id:"canvas",width:1e3,height:800})))}}]),a}(n.Component);a(25);var d=function(){return r.a.createElement("div",{className:"App",style:{textAlign:"center"}},r.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.dcacf96d.chunk.js.map